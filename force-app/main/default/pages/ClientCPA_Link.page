<!-- Ability to view the client/cpa linking.

   History
   -------
   09/23/2011 Dan Carmen        Created.
 -->
<apex:page standardController="Client_CPA_Link__c" 
            extensions="ClientCPA_LinkController" 
            title="Link a CPA to a Client" showHeader="false" 
            standardStylesheets="true">
  <!-- <apex:composition template="{!$Site.Template}">  --> 
   <apex:define name="body"> 
    <apex:form > 
     <apex:messages id="error" 
                    styleClass="errorMsg" 
                    layout="table" 
                    style="margin-top:1em;"/> 
       <apex:pageBlock title="" mode="edit"> 
         <apex:pageBlockButtons > 
            <apex:commandButton value="Search" 
                                action="{!searchRecords}"/> 
         </apex:pageBlockButtons> 
         <apex:pageBlockSection title="Referral Information" 
                                collapsible="false" 
                                columns="1">
          <apex:inputField value="{!Client_CPA_Link__c.First_Name__c}"/> 
          <apex:inputField value="{!Client_CPA_Link__c.Last_Name__c}"/> 
          <apex:inputField value="{!Client_CPA_Link__c.Phone__c}"/> 
          <apex:inputField value="{!Client_CPA_Link__c.Email__c}"/> 
          <apex:inputField value="{!Client_CPA_Link__c.Referral_Account_Name__c}"/> 
          <apex:inputField value="{!Client_CPA_Link__c.Postal_Code__c}"/>
         </apex:pageBlockSection> 
         <apex:pageBlockSection title="Client Information" 
                                collapsible="false" 
                                columns="1">
          <apex:inputField value="{!Client_CPA_Link__c.Client_Name__c}"/> 
          <apex:inputField value="{!Client_CPA_Link__c.Payroll_Branch_Number__c}"/> 
          <apex:inputField value="{!Client_CPA_Link__c.Payroll_Client_Number__c}"/> 
          <apex:inputField value="{!Client_CPA_Link__c.Client_Postal_Code__c}"/> 
         </apex:pageBlockSection>
         
         <apex:pageBlockSection rendered="{!searchPerformed}" title="Search Results" columns="1">
            <apex:pageBlockTable value="{!refSearch.searchResults}" var="ctct" cellPadding="4" border="1" title="Referral Search Results">
               <apex:column headerValue="Contact Name"> 
                  <apex:outputField value="{!ctct.Name}"/>
               </apex:column>
               <apex:column headerValue="Phone"> 
                  <apex:outputField value="{!ctct.Phone__c}"/>
               </apex:column>
               <apex:column headerValue="Email"> 
                  <apex:outputField value="{!ctct.Email__c}"/>
               </apex:column>
               <apex:column headerValue="Account Name"> 
                  <apex:outputField value="{!ctct.Referral_Account__r.Name}"/>
               </apex:column>
               <apex:column headerValue="Street Address"> 
                  <apex:outputField value="{!ctct.Referral_Account__r.Street_Address_1__c}"/>
               </apex:column>
               <apex:column headerValue="Zip Code"> 
                  <apex:outputField value="{!ctct.Referral_Account__r.Zip_Postal_Code__c}"/>
               </apex:column>
            </apex:pageBlockTable>

            <apex:pageBlockTable value="{!acctSearch.searchResults}" var="rec" cellPadding="4" border="1" title="Client Search Results">
               <apex:column headerValue="Client Name"> 
                  <apex:outputField value="{!rec.Name}"/>
               </apex:column>
               <apex:column headerValue="Branch-Client Number"> 
                  <apex:outputField value="{!rec.AccountNumber}"/>
               </apex:column>
               <apex:column headerValue="Billing Street"> 
                  <apex:outputField value="{!rec.BillingStreet}"/>
               </apex:column>
               <apex:column headerValue="Billing PostalCode"> 
                  <apex:outputField value="{!rec.BillingPostalCode}"/>
               </apex:column>
               <apex:column headerValue="Shipping Street"> 
                  <apex:outputField value="{!rec.ShippingStreet}"/>
               </apex:column>
               <apex:column headerValue="Shipping PostalCode"> 
                  <apex:outputField value="{!rec.ShippingPostalCode}"/>
               </apex:column>
               <apex:column headerValue="Current CPA"> 
                  <apex:outputField value="{!rec.CPA_Name_Ref__r.Name}"/>
               </apex:column>
            </apex:pageBlockTable>
            
         </apex:pageBlockSection>
      </apex:pageBlock> 
    </apex:form> 
   </apex:define>  
 <!--  </apex:composition>  --> 

</apex:page>