<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>MS_Opportunity_Sold_NewProcessor_MID</fullName>
    <active>true</active>
    <description>If the status is set to Sold for a Merchant Services (Payment Processing) Opportunity, the New Processor and MID fields are required.</description>
    <errorConditionFormula>AND( 
OR($RecordType.Name=&apos;Payment Processing Opportunity&apos;, $RecordType.Name=&apos;Payment Processing (DSA) Opportunity&apos;), 
NOT(BEGINS($Profile.Name,&apos;System Administrator&apos;)), 
ISPICKVAL(StageName,&apos;Sold&apos;), 
( ISBLANK(MID__c) || ISPICKVAL(New_Processor__c, &apos;&apos;) ) ,
NOT( ISPICKVAL(OpportunityType__c,&apos;Referral&apos;))
)</errorConditionFormula>
    <errorDisplayField>New_Processor__c</errorDisplayField>
    <errorMessage>You must populate the New Processor and MID fields before setting the Opportunity Status to Sold.</errorMessage>
</ValidationRule>
