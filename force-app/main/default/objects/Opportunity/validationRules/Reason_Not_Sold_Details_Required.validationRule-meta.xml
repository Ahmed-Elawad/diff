<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>Reason_Not_Sold_Details_Required</fullName>
    <active>true</active>
    <description>Makes Reason Lost Details Required when an opportunity is saved with &quot;Lost&quot; or &quot;No Decision&quot;</description>
    <errorConditionFormula>AND(
NOT(BEGINS($Profile.Name, &apos;System Admin&apos;)),
ISCHANGED(StageName),
ISBLANK(TEXT(Reason_Not_Sold_Details__c)),
Contains($Label.OpptyRecordTypeForReasonNotSoldDetails, $RecordType.DeveloperName),
OR(
ISPICKVAL(StageName ,&apos;Lost&apos;),
ISPICKVAL( StageName ,&apos;No Decision&apos;),
ISPICKVAL( StageName ,&apos;Disqualified&apos;)
),
AND(
NOT(ISPICKVAL(Reason_Not_Sold__c, &apos;No reason given/unable to contact client&apos;)),
NOT(ISPICKVAL(Reason_Not_Sold__c, &apos;Client does not need solution&apos;)),
NOT(ISPICKVAL(Reason_Not_Sold__c, &apos;Coverage denied&apos;)),
NOT(ISPICKVAL(Reason_Not_Sold__c, &apos;Other&apos;))
)

)</errorConditionFormula>
    <errorDisplayField>Reason_Not_Sold_Details__c</errorDisplayField>
    <errorMessage>Reason Lost Details is required when the opportunity is Lost, No Decision or Disqualified.</errorMessage>
</ValidationRule>
