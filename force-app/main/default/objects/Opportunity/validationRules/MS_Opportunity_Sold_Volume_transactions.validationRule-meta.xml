<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>MS_Opportunity_Sold_Volume_transactions</fullName>
    <active>true</active>
    <description>The Monthly Volume and transactions per month fields must be populated when the Status is set to Sold for a Merchant Services (Payment Processing) Opportunity.</description>
    <errorConditionFormula>AND( 
OR($RecordType.Name=&apos;Payment Processing Opportunity&apos;, $RecordType.Name=&apos;Payment Processing (DSA) Opportunity&apos;), 
NOT(BEGINS($Profile.Name,&apos;System Administrator&apos;)),
ISPICKVAL(StageName,&apos;Sold&apos;),
( ISBLANK(Visa_MC_Monthly_Volume__c) || ISBLANK(ACH_Monthly_Volume__c) || ISBLANK(Num_of_ACH_check_transactions_per_month__c) || ISBLANK(Num_of_Visa_MC_transactions_per_month__c) ),
NOT( ISPICKVAL(OpportunityType__c,&apos;Referral&apos;))
)</errorConditionFormula>
    <errorDisplayField>Visa_MC_Monthly_Volume__c</errorDisplayField>
    <errorMessage>You must populate the Visa/MC Monthly Volume, ACH Monthly Volume, # of ACH/check transactions per month and # of Visa/MC transactions per month fields before the Status is set to Sold.</errorMessage>
</ValidationRule>
