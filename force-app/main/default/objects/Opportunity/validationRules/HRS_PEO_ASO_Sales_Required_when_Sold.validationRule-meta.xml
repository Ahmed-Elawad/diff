<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>HRS_PEO_ASO_Sales_Required_when_Sold</fullName>
    <active>true</active>
    <description>need to be sure Service Location and Payroll Platform are populated before marking opty Sold</description>
    <errorConditionFormula>(ISPICKVAL( StageName , &quot;Sold:&quot;) || ISPICKVAL( StageName , &quot;Sold&quot;))
&amp;&amp; (ISCHANGED(StageName)  || isnew())  
&amp;&amp; (ISBLANK(TEXT( Service_Location__c )) || ISBLANK(TEXT( Payroll_Platform__c ))) 
&amp;&amp; NOT(BEGINS($Profile.Name,&quot;System Administrator&quot;))
&amp;&amp; NOT($User.Sales_Division__c = &quot;CSSR&quot;) 
&amp;&amp; ($RecordType.Id =&quot;012500000000ntY&quot;  || $RecordType.Id =&quot;012500000000n4V&quot; || $RecordType.Id =&quot;0120g000000EAgt&quot; || $RecordType.Id =&quot;0120g000000EAgo&quot;)</errorConditionFormula>
    <errorDisplayField>Service_Location__c</errorDisplayField>
    <errorMessage>If you are updating the record to Sold, you must select the correct Service Location you are submitting it to and the Payroll Platform it will be on.</errorMessage>
</ValidationRule>
